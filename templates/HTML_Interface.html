<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
<title> OOCAM ML Interface </title>
<style>
.flex-container > div {
  width: 47.5%;
  padding: 10px;
  border-color:white;
  border-style:solid;
  border-radius: 15px;
  border-width: 3px;
  color:whitesmoke;
}

/* Clear floats after the columns */
.flex-container {
  display: flex;
  justify-content: space-between;
}
</style>
</head>
<body style="background-color:#222329">
<section style="background-color:#222930 ;border-width:3px ;border-style:solid ;border-color:white;border-radius:15px" >
<h1 style="text-align:center;color:#4EB1BA;font-size:40px; font-weight:bold"> Open Ocean Camera Interface </h1>
<h4 style="text-align:center;color:#4EB1BA; font-family:verdana "> Powered by Open Ocean Engineering Ltd. </h4>
</section>
<br>
<div class="flex-container">
  <div style="background-color:#222930; font-family:monospace; font-size:14px">
    <h2 style="text-align:center; color:#4EB1BA"> Train </h2>
    <p>
  Instructions: <br> <br>

  (i)   In the first text field (File:), select the folder where all the images for training are located with the file selector.<br>
        File name format: &ltclass_name&gt&ltimage_number&gt.&ltjpg|png|jpeg&gt<br>
        eg: DotManta34.jpg<br>
  (ii)  In the second text field (Split:), enter the split value : a float value between 0 and 1 <br>
        0.8 would mean 80% of the images are for train, 20% for test <br>
  (iii) In the third text field (Epoch:), enter number of epochs: no. of complete presentations of dataset to be learned by machine <br>
  (iv)  Click Train and give it a little time to process <br>
        The model (model.h5) and the labels file (labels.dat) will be generated and placed into the 'output' folder. The maximum validation accuracy achieved shall be shown on a new webpage <br>
<form id="demo" action="/" enctype = "multipart/form-data" method="POST">
  <br>

  {{ trainForm.hidden_tag() }}
  {{ trainForm.images.label }} {{ trainForm.images(webkitdirectory='true') }} <br><br>
  {{ trainForm.split.label }} {{ trainForm.split }}<br><br>
  {{ trainForm.epochs.label }} {{ trainForm.epochs }}<br><br>

  {% if trainForm.images.errors %}
  <ul>
	  {% for error in trainForm.images.errors %}
		  <li> {{ error }} </li>
	  {% endfor %}
  </ul>
  {% endif %}

  {% if trainForm.split.errors %}
  <ul>
	  {% for error in trainForm.split.errors %}
		  <li> {{ error }} </li>
	  {% endfor %}
  </ul>
  {% endif %}

  {% if trainForm.epochs.errors %}
  <ul>
	  {% for error in trainForm.epochs.errors %}
		  <li> {{ error }} </li>
	  {% endfor %}
  </ul>
  {% endif %}
  
  {{ trainForm.submit }}

</p>
</form>
	<form action = "{{ url_for('download', folder = 'train') }}">
		<input type = "submit" value = "Download sample train folder" />
	</form>
</p>
  </div>
  <div style="background-color:#222930;font-family:monospace; font-size:14px">
    <h2 style="text-align:center; color:#4EB1BA"> Predict </h2>
    <p>
  Instructions: <br> <br>

  (i)   In the first text field (Model:), enter the location of the model.h5 file <br>
  (ii)  In the second text field (Image:), enter the location of the folder containing the image files that needs to be predicted <br>
  (iii) In the third text field (Labels:), enter the location of the labels.dat file <br>
  (iv)  The images would be sorted and stored in the 'predictions' folder in the main directory of the repo <br>
<form id = "demo2" action = "/" enctype = "multipart/form-data" method = "POST">
<br>
{{ testForm.hidden_tag() }}
{{ testForm.images.label }} {{ testForm.images(webkitdirectory='true') }} <br><br>
{{ testForm.model.label }} {{ testForm.model }}<br><br>
{{ testForm.labels.label }} {{ testForm.labels }}<br><br>

  {% if testForm.images.errors %}
  <ul>
	  {% for error in testForm.images.errors %}
		  <li> {{ error }} </li>
	  {% endfor %}
  </ul>
  {% endif %}

  {% if testForm.model.errors %}
  <ul>
	  {% for error in testForm.model.errors %}
		  <li> {{ error }} </li>
	  {% endfor %}
  </ul>
  {% endif %}

  {% if testForm.labels.errors %}
  <ul>
	  {% for error in testForm.labels.errors %}
		  <li> {{ error }} </li>
	  {% endfor %}
  </ul>
  {% endif %}

  {{ testForm.submit }}
</p>
</form>
	<form action = "{{ url_for('download', folder = 'test') }}">
		<input type = "submit" value = "Download sample test folder" />
	</form>
  </div>
</div>
    </body>
    </html>
